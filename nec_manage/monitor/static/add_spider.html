<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="lib/html5shiv.js"></script>
    <script type="text/javascript" src="lib/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="static/h-ui/css/H-ui.min.css"/>
    <link rel="stylesheet" type="text/css" href="lib/Hui-iconfont/1.0.8/iconfont.min.css"/>
    <!--[if lt IE 9]>
    <link href="static/h-ui/css/H-ui.ie.css" rel="stylesheet" type="text/css"/>
    <![endif]-->
    <!--[if IE 6]>
    <script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js"></script>
    <script>DD_belatedPNG.fix('*');</script>
    <![endif]-->
    <title>添加动态Spider - MiFront</title>
</head>
<body>
<header class="navbar-wrapper">
    <div class="navbar navbar-black navbar-fixed-top">
        <div class="container cl">
            <a class="logo navbar-logo hidden-xs" href="#">MiFront</a>
            <span class="logo navbar-slogan hidden-xs">Mi管理中心</span>
            <a aria-hidden="false"
               class="nav-toggle Hui-iconfont visible-xs"
               href="javascript:;">&#xe667;</a>
            <nav class="nav navbar-nav nav-collapse" role="navigathttp://www.h-ui.net/ion" id="Hui-navbar">
                <ul class="cl">
                    <li><a href="index.html">首页</a></li>
                    <li class="current"><a href="#">添加动态Spider</a></li>
                    <li><a href="add_ip.html">添加代理IP</a></li>
                    <li><a href="http://www.zzkun.com" target="_blank">联系我们</a></li>
                </ul>
            </nav>
            <nav class="navbar-userbar hidden-xs"></nav>
        </div>
    </div>
</header>

<nav class="breadcrumb">
    <div class="container">
        <i class="Hui-iconfont">&#xe67f;</i>
        <a href="index.html" class="c-primary">首页</a>
        <span class="c-gray en">&gt;</span>
        <span class="c-gray">添加动态Spider</span>
    </div>
</nav>
<section class="container">
    <div style="margin-top: 15px"></div>
    <div class="panel panel-default">
        <div class="panel-header">添加新闻Spider</div>
        <div class="panel-body">
            <form action="" method="post" class="form form-horizontal responsive" id="demoform">

                <div class="row cl">
                    <label class="form-label col-xs-3">name</label>
                    <div class="formControls col-xs-8">
                        <input type="text" class="input-text" id="name" placeholder="唯一指定爬虫名">
                    </div>
                </div>

                <div class="row cl">
                    <label class="form-label col-xs-3">start_urls</label>
                    <div class="formControls col-xs-8">
                        <textarea cols="" rows="" class="textarea" name="beizhu" id="start_urls"
                                  placeholder="start_urls，一行一个" onkeyup="$.Huitextarealength(this,500)"></textarea>
                        <p class="textarea-numberbar"><em class="textarea-length">0</em>/500</p>
                    </div>
                </div>

                <div class="row cl">
                    <label class="form-label col-xs-3">allowed_domains</label>
                    <div class="formControls col-xs-8">
                        <textarea cols="" rows="" class="textarea" name="beizhu" id="allowed_domains"
                                  placeholder="allowed_domains，一行一个" onkeyup="$.Huitextarealength(this,500)"></textarea>
                        <p class="textarea-numberbar"><em class="textarea-length">0</em>/500</p>
                    </div>
                </div>

                <div class="row cl">
                    <label class="form-label col-xs-3">rule_allow</label>
                    <div class="formControls col-xs-8">
                        <textarea cols="" rows="" class="textarea" name="beizhu" id="rule_allow"
                                  placeholder="rule_allow，一行一个" onkeyup="$.Huitextarealength(this,500)"></textarea>
                        <p class="textarea-numberbar"><em class="textarea-length">0</em>/500</p>
                    </div>
                </div>

                <div class="row cl">
                    <label class="form-label col-xs-3">rule_deny</label>
                    <div class="formControls col-xs-8">
                        <textarea cols="" rows="" class="textarea" name="beizhu" id="rule_deny"
                                  placeholder="rule_deny，一行一个" onkeyup="$.Huitextarealength(this,500)"></textarea>
                        <p class="textarea-numberbar"><em class="textarea-length">0</em>/500</p>
                    </div>
                </div>

                <div class="row cl">
                    <label class="form-label col-xs-3">xpath_title</label>
                    <div class="formControls col-xs-8">
                        <textarea cols="" rows="" class="textarea" name="beizhu" id="xpath_title"
                                  placeholder="xpath_title，一行一个" onkeyup="$.Huitextarealength(this,500)"></textarea>
                        <p class="textarea-numberbar"><em class="textarea-length">0</em>/500</p>
                    </div>
                </div>

                <div class="row cl">
                    <label class="form-label col-xs-3">xpath_content</label>
                    <div class="formControls col-xs-8">
                        <textarea cols="" rows="" class="textarea" name="beizhu" id="xpath_content"
                                  placeholder="xpath_content，一行一个" onkeyup="$.Huitextarealength(this,500)"></textarea>
                        <p class="textarea-numberbar"><em class="textarea-length">0</em>/500</p>
                    </div>
                </div>

                <div class="row cl">
                    <div class="col-xs-8 col-xs-offset-3">
                        <input class="btn btn-primary"
                               type="submit"
                               value="&nbsp;&nbsp;提交&nbsp;&nbsp;"
                               onclick="submit_add_spider()">
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>
<footer class="footer mt-20">
    <div class="container">
        <p>Copyright &copy;Mi All Rights Reserved. <br>
            未经允许，禁止转载、抄袭、镜像<br>
            用心做，做不一样的</p>
    </div>
</footer>


<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="lib/jquery.SuperSlide/2.1.1/jquery.SuperSlide.min.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/jquery.validate.min.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/validate-methods.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/messages_zh.min.js"></script>

<script>
    $(function () {
        //幻灯片
        jQuery("#slider-3 .slider").slide({
            mainCell: ".bd ul",
            titCell: ".hd li",
            trigger: "click",
            effect: "leftLoop",
            autoPlay: true,
            delayTime: 700,
            interTime: 3000,
            pnLoop: false,
            titOnClassName: "active"
        });
        //邮箱提示
        $("#email").emailsuggest({});
        //checkbox 美化
        $('.skin-minimal input').iCheck({
            checkboxClass: 'icheckbox-blue',
            radioClass: 'iradio-blue',
            increaseArea: '20%'
        });

        //日期插件
        $("#datetimepicker").datetimepicker({
            format: 'yyyy-mm-dd',
            minView: "month",
            todayBtn: 1,
            autoclose: 1,
            endDate: new Date()
        }).on('hide', function (e) {
            //此处可以触发日期校验。
        });

        /*+1 -1效果*/
        $("#spinner-demo").Spinner({value: 1, min: 1, len: 2, max: 99});

        $("#demoform").validate({
            rules: {
                email: {
                    required: true,
                    email: true,
                },
                username: {
                    required: true,
                    minlength: 4,
                    maxlength: 16
                },
                telephone: {
                    required: true,
                    isMobile: true,
                },
                password: {
                    required: true,
                    isPwd: true,
                },
                password2: {
                    required: true,
                    equalTo: "#password"
                },
                sex: {
                    required: true,
                },
                datetimepicker: {
                    required: true,
                },
                checkbox2: {
                    required: true,
                },
                city: {
                    required: true,
                },
                website: {
                    required: true,
                    url: true,
                },
                beizhu: {
                    maxlength: 500,
                }
            },
            onkeyup: false,
            focusCleanup: true,
            success: "valid",
            submitHandler: function (form) {
                $("#modal-shenqing-success").modal("show");
                $(form).ajaxSubmit();
            }
        });

        //选项卡
        $.Huitab("#tab_demo .tabBar span", "#tab_demo .tabCon", "current", "click", "1");

        //返回顶部
        $(window).on("scroll", backToTopFun);
        backToTopFun();

        //hover效果
        $.Huihover('.maskWraper');

        //星级评价
        $("#star-1").raty({
            hints: ['1', '2', '3', '4', '5'],//自定义分数
            starOff: 'iconpic-star-S-default.png',//默认灰色星星
            starOn: 'iconpic-star-S.png',//黄色星星
            path: 'http://static.h-ui.net/h-ui/images/star',//可以是相对路径
            number: 5,//星星数量，要和hints数组对应
            showHalf: true,
            targetKeep: true,
            click: function (score, evt) {//点击事件
                //第一种方式：直接取值
                $("#result-1").html('你的评分是' + score + '分');
            }
        });
    });

    //弹窗
    function modaldemo() {
        $("#modal-demo").modal("show");
    }
    //消息框
    function modalalertdemo() {
        $.Huimodalalert('我是消息框，2秒后我自动滚蛋！', 2000);
    }
</script>

<script>
    var POST_URL = "http://192.168.210.152:5020/gen_spider";
    function submit_add_spider() {
        var js = {
            name: $("#name").val(),
            start_urls: $("#start_urls").val().split('\n'),
            allowed_domains: $("#allowed_domains").val().split("\n"),
            rule_allow: $("#rule_allow").val().split("\n"),
            rule_deny: $("#rule_deny").val().split("\n"),
            xpath_title: $("#xpath_title").val().split("\n"),
            xpath_content: $("#xpath_content").val().split("\n")
        };
        var str = JSON.stringify(js);
        console.log(str);
        $.post(POST_URL, {json_result: str}).success(function () {
            alert("添加spider" + js.name + "成功！");
        });
    }
</script>

</body>
</html>
